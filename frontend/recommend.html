<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ì¶”ì²œ ê²°ê³¼</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-pink-50 to-yellow-50 text-gray-800 font-sans">

  <!-- âœ… ì œëª© -->
  <div class="text-center mt-10">
    <h1 class="text-4xl font-bold mb-2">ğŸ§™â€â™€ï¸ íŒ¨ì…˜ ë§ˆë²•ì‚¬ì˜ ì¶”ì²œì„œ</h1>
    <p class="text-lg text-gray-600">ë‹¹ì‹ ì˜ ì·¨í–¥ì„ ë¶„ì„í•´ ë§ˆë²•ì²˜ëŸ¼ ì–´ìš¸ë¦¬ëŠ” ìŠ¤íƒ€ì¼ì„ ì°¾ì•„ëƒˆì–´ìš”!</p>
  </div>

  <!-- âœ… ì¶”ì²œ ê²°ê³¼ê°€ ë Œë”ë§ë  ìë¦¬ -->
  <div id="recommendation" class="flex flex-wrap justify-center gap-6 mt-10 px-4"></div>

  <!-- âœ… JS: Flask ì„œë²„ì—ì„œ ì¶”ì²œ ê²°ê³¼ ë°›ì•„ì˜¤ê¸° -->
  <script>
    window.onload = async () => {
      const params = new URLSearchParams(window.location.search);
      const gender = params.get("gender");
      const age = params.get("age");
      const style = params.get("style");
      const occasion = params.get("occasion");

      const url = `http://127.0.0.1:5000/recommend?gender=${gender}&age=${age}&style=${style}&occasion=${occasion}`;
      try {
        const response = await fetch(url);
        const result = await response.json();

        const container = document.getElementById("recommendation");

        if (result.recommendations) {
          result.recommendations.forEach(item => {
            const card = document.createElement("div");
            card.className = "bg-white shadow-lg rounded-xl p-6 w-72 text-center";
            card.innerHTML = `
              <h3 class="text-xl font-semibold mb-2">${item.style} ìŠ¤íƒ€ì¼ (${item.era}ë…„ëŒ€)</h3>
              <img src="/images/${item.imgName}" alt="${item.style}" class="w-full h-64 object-cover rounded mb-4">
              <p class="text-sm text-gray-700">${item.description}</p>
            `;
            container.appendChild(card);
          });
        } else {
          container.innerHTML = `<p class="text-red-500 text-center">â— ì¶”ì²œ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>`;
        }
      } catch (error) {
        console.error("API ìš”ì²­ ì‹¤íŒ¨:", error);
        document.getElementById("recommendation").innerHTML = `<p class="text-red-500 text-center">â— ì„œë²„ ì˜¤ë¥˜ ë˜ëŠ” ì—°ê²° ì‹¤íŒ¨</p>`;
      }
    };
  </script>

</body>
</html>